<div class="min-h-screen bg-gray-50 flex flex-col items-center py-10">
    <!-- Conteúdo -->
    <div
        class="container mx-auto px-4 md:px-8 flex flex-col md:flex-row gap-8 mt-6">
        <!-- Seção Esquerda: Informações do Usuário -->
        <div class="bg-white p-6 rounded-lg shadow-md w-full md:w-1/3">
            <div class="text-center">
                <h2 class="text-xl font-semibold text-gray-700">
                    Perfil de Utilizador
                </h2>
            </div>

      <!-- Nome de Utilizador -->
      <div class="mt-4">
        <span class="font-medium text-gray-700">Nome de Utilizador:</span>
        <div class="flex items-center gap-2">
          <p *ngIf="!editingUsername" class="text-gray-600">{{ username }}</p>
          <input *ngIf="editingUsername" type="text" [(ngModel)]="username"
                 class="border rounded-lg p-2 w-full focus:ring focus:ring-green-200">
        </div>
        <div class="flex gap-2 mt-2">
          <button (click)="editingUsername = !editingUsername"
                  class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
            {{ editingUsername ? 'Cancelar' : 'Editar' }}
          </button>
          <button *ngIf="editingUsername" (click)="updateUsername()"
                  class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">
            Guardar
          </button>
        </div>
      </div>

            <!-- Email -->
            <div class="mt-4">
                <span class="font-medium text-gray-700">Email:</span>
                <p class="text-gray-600">{{ email }}</p>
            </div>

      <!-- Tags -->
      <div class="mt-6 flex flex-col">
        <span class="font-medium text-gray-700">Tags:</span>
        <div class="relative mt-2">
          <select [(ngModel)]="selectedTag" class="w-full border rounded-lg p-2 focus:ring focus:ring-green-200">
            <option *ngFor="let tag of availableTags" [value]="tag">{{ tag }}</option>
          </select>
        </div>
        <button (click)="saveTag()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition mt-2">
          Guardar
        </button>
      </div>


      <!-- Pontos -->
      <div class="mt-4">
        <span class="font-medium text-gray-700">Pontos:</span>
        <p class="text-gray-600">{{ points }}</p>
      </div>
    </div>

        <!-- Seção Direita: Lista de Amigos (Dinamicamente) -->
        <div class="bg-white p-6 rounded-lg shadow-md w-full md:w-2/3">
            <div class="flex items-center gap-2 mb-4">
                <h2 class="text-xl font-semibold text-gray-700">
                    Lista de amigos
                </h2>
                <button
                    (click)="showAddFriendModal = true"
                    class="text-green-600 hover:text-green-800 text-lg font-bold">
                    +
                </button>
            </div>

      <!-- Lista de amigos dinâmica com Scroll -->
      <div [class.overflow-y-auto]="friendsList.length > 5" class="border rounded-lg">
        <table class="w-full text-left">
          <tbody>
            <tr *ngFor="let friend of friendsList; let i = index" class="border-b">
              <td class="p-2">{{ friend.username }}</td>
              <td class="p-2">
                <button (click)="viewProfile(friend.username)" class="text-green-600 hover:text-green-800">
                  Ver perfil
                </button>
              </td>
              <td class="p-2">
                <button (click)="selectedFriendIndex = i; showRemoveFriendModal = true"
                        class="text-red-600 hover:text-red-800">
                  Remover
                </button>
              </td>
            </tr>
            <tr *ngIf="friendsList.length === 0">
              <td colspan="3" class="p-4 text-gray-500 text-center">
                Nenhum amigo encontrado.
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- MODAL: ADICIONAR AMIGO -->
  <div *ngIf="showAddFriendModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50">
    <div class="bg-white p-6 rounded-lg shadow-lg w-96">
      <h2 class="text-xl font-semibold text-gray-700 text-center">Adicionar amigo</h2>

     <!-- Campo de Nome -->
     <div class="mt-4">
      <label for="InputAdd" class="block text-gray-700 font-medium mb-1">Nome de utilizador:</label>
      <input id="InputAdd" type="text" (input)="findUser()"
             class="w-full border rounded-lg p-2 focus:ring focus:ring-green-200">
  </div>

      <!-- Lista de Utilizadores -->
      <div class="mt-4 border rounded-lg p-2 h-32 overflow-y-auto text-gray-600">
        <table class="w-full text-left">
          <tbody>
            <tr *ngFor="let username of userList" class="border-b">
              <td class="p-2 cursor-pointer hover:bg-green-200" (click)="selectUser(username)">
                {{ username }}
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Botões -->
      <div class="flex justify-between mt-6">
        <button (click)="addFriend()" class="w-1/2 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700">
          Adicionar
        </button>
        <button (click)="showAddFriendModal = false"
                class="w-1/2 bg-gray-400 text-white py-2 rounded-lg hover:bg-gray-500">
          Cancelar
        </button>
      </div>
    </div>
  </div>
</div>
